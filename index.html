<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SerenityAI - Your Mental Health Companion</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-lavender: #b19cd9;
            --soft-peach: #ffd6cc;
            --mint-green: #c8e6c9;
            --sky-blue: #e1f5fe;
            --warm-cream: #fefcf3;
            --soft-gray: #8b95a1;
            --text-dark: #4a5568;
            --shadow-light: rgba(177, 156, 217, 0.15);
            --shadow-medium: rgba(177, 156, 217, 0.25);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--warm-cream) 0%, var(--sky-blue) 25%, var(--soft-peach) 75%, var(--primary-lavender) 100%);
            min-height: 100vh;
            color: var(--text-dark);
            line-height: 1.7;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 32px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px var(--shadow-light);
        }

        .logo {
            font-size: 3.2em;
            font-weight: 300;
            color: var(--primary-lavender);
            margin-bottom: 16px;
            text-shadow: 0 2px 8px var(--shadow-light);
        }

        .tagline {
            font-size: 1.4em;
            color: var(--text-dark);
            font-weight: 500;
            margin-bottom: 12px;
        }

        .subtitle {
            font-size: 1.1em;
            color: var(--soft-gray);
            font-weight: 400;
        }

        /* Main Content Card */
        .main-card {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 32px;
            padding: 40px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 12px 40px var(--shadow-medium);
        }

        /* Mood Slider Section */
        .mood-section {
            margin-bottom: 36px;
        }

        .section-title {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 20px;
            text-align: center;
        }

        .mood-display {
            text-align: center;
            margin-bottom: 24px;
        }

        .mood-emoji {
            font-size: 4em;
            margin-bottom: 12px;
            display: block;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .mood-emoji.bounce {
            transform: scale(1.2);
        }

        .mood-text {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary-lavender);
            margin-bottom: 8px;
        }

        .mood-description {
            font-size: 1em;
            color: var(--soft-gray);
            font-style: italic;
        }

        .mood-slider-container {
            position: relative;
            margin: 32px 0;
        }

        .mood-slider {
            width: 100%;
            height: 12px;
            border-radius: 20px;
            background: linear-gradient(to right, 
                #ff6b6b 0%, #ff8e53 15%, #ff9f43 30%, 
                #ffd93d 45%, #6bcf7f 60%, #4ecdc4 75%, 
                #45b7d1 90%, #96ceb4 100%);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }

        .mood-slider::-webkit-slider-thumb {
            appearance: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-lavender), #9575cd);
            cursor: pointer;
            box-shadow: 0 4px 20px var(--shadow-medium);
            border: 3px solid white;
            transition: all 0.3s ease;
        }

        .mood-slider::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow: 0 6px 30px var(--shadow-medium);
        }

        .mood-slider::-moz-range-thumb {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-lavender), #9575cd);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 4px 20px var(--shadow-medium);
        }

        .mood-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
            font-size: 0.9em;
            color: var(--soft-gray);
            font-weight: 500;
        }

        /* Feelings Input */
        .feelings-section {
            margin-bottom: 36px;
        }

        .feelings-label {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 16px;
            display: block;
        }

        .feelings-textarea {
            width: 100%;
            height: 140px;
            padding: 20px;
            border: 2px solid rgba(177, 156, 217, 0.2);
            border-radius: 20px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.7);
            color: var(--text-dark);
        }

        .feelings-textarea:focus {
            outline: none;
            border-color: var(--primary-lavender);
            box-shadow: 0 0 0 4px rgba(177, 156, 217, 0.15);
            background: rgba(255, 255, 255, 0.9);
        }

        .feelings-textarea::placeholder {
            color: var(--soft-gray);
            font-style: italic;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 36px;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-lavender), #9575cd);
            color: white;
            box-shadow: 0 6px 20px var(--shadow-medium);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--mint-green), #81c784);
            color: white;
            box-shadow: 0 6px 20px rgba(129, 199, 132, 0.25);
        }

        .btn-tertiary {
            background: linear-gradient(135deg, var(--soft-peach), #ffab91);
            color: var(--text-dark);
            box-shadow: 0 6px 20px rgba(255, 171, 145, 0.25);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px var(--shadow-medium);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        /* Response Section */
        .response-section {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 24px;
            padding: 32px;
            margin-top: 24px;
            border: 1px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 8px 32px var(--shadow-light);
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .response-section.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .emotion-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-lavender), #9575cd);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .empathy-message {
            background: rgba(177, 156, 217, 0.1);
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 24px;
            border-left: 5px solid var(--primary-lavender);
            font-size: 1.1em;
            line-height: 1.6;
        }

        .recommendation {
            background: rgba(200, 230, 201, 0.15);
            padding: 24px;
            border-radius: 16px;
            border-left: 5px solid var(--mint-green);
        }

        .recommendation-title {
            font-weight: 700;
            color: #2e7d32;
            margin-bottom: 12px;
            font-size: 1.2em;
        }

        .recommendation-content {
            font-size: 1.05em;
            line-height: 1.6;
            color: var(--text-dark);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(74, 85, 104, 0.8);
            backdrop-filter: blur(8px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--warm-cream);
            padding: 40px;
            border-radius: 32px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.4s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                transform: scale(0.9) translateY(20px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid rgba(177, 156, 217, 0.2);
        }

        .modal-title {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2em;
            color: var(--soft-gray);
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(177, 156, 217, 0.1);
            color: var(--primary-lavender);
        }

        /* Breathing Exercise */
        .breathing-visual {
            text-align: center;
            margin: 32px 0;
        }

        .breathing-circle {
            width: 150px;
            height: 150px;
            border: 4px solid var(--primary-lavender);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary-lavender);
            font-size: 1.2em;
            transition: all 1s ease-in-out;
            background: linear-gradient(135deg, rgba(177, 156, 217, 0.1), rgba(255, 214, 204, 0.1));
        }

        .breathing-circle.inhale {
            transform: scale(1.4);
            background: linear-gradient(135deg, rgba(177, 156, 217, 0.2), rgba(255, 214, 204, 0.2));
        }

        .breathing-circle.exhale {
            transform: scale(0.7);
            background: linear-gradient(135deg, rgba(200, 230, 201, 0.2), rgba(225, 245, 254, 0.2));
        }

        .breathing-instructions {
            background: rgba(177, 156, 217, 0.1);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1em;
            line-height: 1.6;
        }

        /* Saved Entries */
        .saved-entries {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 24px;
            padding: 32px;
            margin-top: 24px;
            border: 1px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 8px 32px var(--shadow-light);
        }

        .entry-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 16px;
            border-left: 5px solid var(--primary-lavender);
        }

        .entry-date {
            font-size: 0.9em;
            color: var(--soft-gray);
            font-weight: 500;
            margin-bottom: 8px;
        }

        .entry-mood {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--primary-lavender);
            margin-bottom: 8px;
        }

        .entry-text {
            font-size: 1em;
            line-height: 1.5;
            color: var(--text-dark);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 32px 20px;
            color: var(--soft-gray);
            font-size: 0.95em;
            margin-top: auto;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
                gap: 20px;
            }

            .header {
                padding: 32px 24px;
            }

            .logo {
                font-size: 2.6em;
            }

            .tagline {
                font-size: 1.2em;
            }

            .main-card {
                padding: 28px;
            }

            .mood-emoji {
                font-size: 3.2em;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 280px;
            }

            .modal-content {
                padding: 28px;
                margin: 20px;
                width: calc(100% - 40px);
            }

            .breathing-circle {
                width: 120px;
                height: 120px;
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            .feelings-textarea {
                height: 120px;
                padding: 16px;
            }

            .mood-slider::-webkit-slider-thumb {
                width: 28px;
                height: 28px;
            }

            .mood-slider::-moz-range-thumb {
                width: 28px;
                height: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">🌸 SerenityAI</div>
            <div class="tagline">Hi, I'm SerenityAI. I'm here to help you check in with yourself today.</div>
            <div class="subtitle">Take a moment to pause, breathe, and connect with how you're feeling right now.</div>
        </div>

        <!-- Main Content -->
        <div class="main-card">
            <!-- Mood Slider Section -->
            <div class="mood-section">
                <h2 class="section-title">How are you feeling right now?</h2>
                <div class="mood-display">
                    <span class="mood-emoji" id="moodEmoji">😐</span>
                    <div class="mood-text" id="moodText">Neutral</div>
                    <div class="mood-description" id="moodDescription">Taking things as they come</div>
                </div>
                <div class="mood-slider-container">
                    <input type="range" id="moodSlider" class="mood-slider" min="1" max="10" value="5">
                    <div class="mood-labels">
                        <span>Very Low</span>
                        <span>Excellent</span>
                    </div>
                </div>
            </div>

            <!-- Feelings Input -->
            <div class="feelings-section">
                <label for="feelingsText" class="feelings-label">Tell me more about what's on your mind...</label>
                <textarea 
                    id="feelingsText" 
                    class="feelings-textarea" 
                    placeholder="You can share anything here - your thoughts, feelings, what happened today, or what's weighing on your heart. There's no judgment, just a safe space to express yourself."
                ></textarea>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="analyzeFeeling()">✨ Get Support</button>
                <button class="btn btn-secondary" onclick="openBreathingModal()">🫁 One-Minute Breathing</button>
                <button class="btn btn-tertiary" onclick="saveMoodEntry()">💾 Save My Mood</button>
            </div>
        </div>

        <!-- Response Section -->
        <div class="response-section" id="responseSection">
            <div class="emotion-badge" id="emotionBadge"></div>
            <div class="empathy-message" id="empathyMessage"></div>
            <div class="recommendation" id="recommendation">
                <div class="recommendation-title" id="recommendationTitle"></div>
                <div class="recommendation-content" id="recommendationContent"></div>
            </div>
        </div>

        <!-- Saved Entries Section -->
        <div class="saved-entries" id="savedEntries" style="display: none;">
            <h3 class="section-title">Your Recent Check-ins</h3>
            <div id="entriesList"></div>
        </div>

        <!-- Footer -->
        <div class="footer">
            Remember: It's okay to not be okay. You're taking a brave step by checking in with yourself. 💙<br>
            <small>Your privacy matters - all data stays on your device.</small>
        </div>
    </div>

    <!-- Breathing Exercise Modal -->
    <div class="modal" id="breathingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">One-Minute Breathing</h3>
                <button class="close-btn" onclick="closeBreathingModal()">&times;</button>
            </div>
            
            <div class="breathing-instructions">
                <p>Find a comfortable position and follow the breathing circle. This simple exercise can help calm your mind and reduce stress in just one minute.</p>
            </div>
            
            <div class="breathing-visual">
                <div class="breathing-circle" id="breathingCircle">
                    <span id="breathingText">Ready?</span>
                </div>
                <div style="margin-top: 16px; font-size: 1.1em; font-weight: 600; color: var(--primary-lavender);" id="breathingCounter"></div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="startBreathingBtn" onclick="startBreathing()">Start Breathing</button>
                <button class="btn btn-secondary" onclick="resetBreathing()">Reset</button>
            </div>
        </div>
    </div>

    <script>
        // Mood data with emojis, descriptions, and colors
        const moodData = {
            1: { emoji: '😢', text: 'Very Low', description: 'Feeling really down right now', color: '#ff6b6b' },
            2: { emoji: '😔', text: 'Low', description: 'Having a tough time', color: '#ff8e53' },
            3: { emoji: '😕', text: 'Not Great', description: 'Struggling a bit today', color: '#ff9f43' },
            4: { emoji: '😐', text: 'Below Average', description: 'Not feeling my best', color: '#ffd93d' },
            5: { emoji: '😐', text: 'Neutral', description: 'Taking things as they come', color: '#ffd93d' },
            6: { emoji: '🙂', text: 'Okay', description: 'Doing alright today', color: '#6bcf7f' },
            7: { emoji: '😊', text: 'Good', description: 'Feeling pretty positive', color: '#4ecdc4' },
            8: { emoji: '😄', text: 'Great', description: 'Having a really good day', color: '#45b7d1' },
            9: { emoji: '😁', text: 'Excellent', description: 'Feeling amazing and energized', color: '#96ceb4' },
            10: { emoji: '🤩', text: 'Outstanding', description: 'On top of the world!', color: '#96ceb4' }
        };

        // Emotion detection patterns
        const emotionPatterns = {
            anxious: {
                keywords: ['anxious', 'anxiety', 'worried', 'nervous', 'panic', 'stress', 'overwhelmed', 'fear', 'scared', 'tense'],
                responses: {
                    empathy: "I can sense you're feeling anxious right now. Anxiety can feel overwhelming, but remember that you're not alone in this experience. These feelings are temporary, even when they feel intense.",
                    mindfulness: "Try the 5-4-3-2-1 grounding technique: Notice 5 things you can see, 4 things you can touch, 3 things you can hear, 2 things you can smell, and 1 thing you can taste. This can help bring you back to the present moment.",
                    journal: "Write about what's making you feel anxious. Sometimes naming our fears can make them feel less powerful. Ask yourself: What would I tell a friend feeling this way?",
                    affirmation: "I am safe in this moment. I can handle whatever comes my way. This feeling will pass, and I have the strength to get through it."
                }
            },
            sad: {
                keywords: ['sad', 'depressed', 'down', 'blue', 'lonely', 'empty', 'hopeless', 'crying', 'tears', 'miserable', 'heartbroken'],
                responses: {
                    empathy: "I hear that you're going through a difficult time right now. Sadness is a natural human emotion that shows your capacity for deep feeling. It's okay to sit with these feelings - they're valid and important.",
                    mindfulness: "Try gentle self-compassion: Place your hand on your heart and take three deep breaths. Remind yourself that difficult emotions are part of the human experience, and you deserve kindness during tough times.",
                    journal: "Write about what you're grateful for, even if it's small things like a warm cup of tea or a text from a friend. When we're sad, our brain focuses on negatives - consciously noting positives can help balance this.",
                    affirmation: "It's okay to feel sad. My emotions are valid. I am worthy of love and care, especially from myself. This difficult time will pass."
                }
            },
            angry: {
                keywords: ['angry', 'mad', 'furious', 'rage', 'annoyed', 'frustrated', 'irritated', 'hate', 'pissed', 'livid'],
                responses: {
                    empathy: "I can feel the intensity of your anger. Anger often signals that something important to you has been threatened or hurt. It's a valid emotion that deserves acknowledgment.",
                    mindfulness: "Try progressive muscle relaxation: Start with your toes, tense them for 5 seconds, then release. Work your way up your body. This helps release physical tension that comes with anger.",
                    journal: "Write about what triggered your anger without censoring yourself. Then ask: What boundary was crossed? What do I need right now? What would help me feel heard or respected?",
                    affirmation: "My anger is telling me something important. I can feel this emotion without being controlled by it. I choose how to respond thoughtfully."
                }
            },
            happy: {
                keywords: ['happy', 'joyful', 'excited', 'grateful', 'amazing', 'wonderful', 'great', 'fantastic', 'elated', 'thrilled'],
                responses: {
                    empathy: "It's beautiful to feel your joy and happiness! These positive emotions are gifts that deserve to be celebrated and savored. Your happiness brings light to the world around you.",
                    mindfulness: "Take a moment to fully experience this happiness. Notice how it feels in your body - maybe a lightness in your chest or a smile that won't quit. This is a moment worth remembering.",
                    journal: "Capture this feeling by writing about what's contributing to your happiness. What specific moments, people, or achievements are lifting your spirits? How can you carry this energy forward?",
                    affirmation: "I deserve this happiness. I am grateful for the joy I feel right now. I will remember this feeling during challenging times."
                }
            },
            tired: {
                keywords: ['tired', 'exhausted', 'drained', 'weary', 'burnt out', 'fatigue', 'sleepy', 'worn out'],
                responses: {
                    empathy: "Feeling exhausted can be really challenging, especially when you still have things to accomplish. Tiredness is your body and mind's way of asking for care and rest.",
                    mindfulness: "Try a body scan meditation: Lie down and mentally check in with each part of your body from head to toe. Notice where you hold tension and consciously release it.",
                    journal: "Reflect on what's been draining your energy lately. Is it physical tiredness, emotional exhaustion, or mental fatigue? What would genuine rest look like for you right now?",
                    affirmation: "Rest is not a luxury - it's necessary for my wellbeing. I give myself permission to slow down and recharge. I am worthy of care and recovery time."
                }
            },
            confused: {
                keywords: ['confused', 'lost', 'uncertain', 'unsure', 'unclear', 'puzzled', 'mixed up', 'conflicted'],
                responses: {
                    empathy: "Feeling confused or uncertain is completely normal, especially during times of change or when facing difficult decisions. Not having all the answers is part of being human.",
                    mindfulness: "Practice 'beginner's mind' - approach your situation with curiosity rather than judgment. Sometimes confusion is just the space between an old understanding and a new one.",
                    journal: "Try a brain dump: Write down everything that's confusing you without trying to organize it. Then look for patterns or themes. Sometimes seeing it all on paper brings clarity.",
                    affirmation: "It's okay not to have all the answers right now. Confusion can be the beginning of wisdom. I trust that clarity will come with time and patience."
                }
            },
            hurt: {
                keywords: ['hurt', 'pain', 'betrayed', 'disappointed', 'broken', 'wounded', 'rejected', 'abandoned'],
                responses: {
                    empathy: "I'm so sorry you're experiencing emotional pain right now. Being hurt by others or by life circumstances can feel devastating. Your pain is real and deserves acknowledgment.",
                    mindfulness: "Practice loving-kindness meditation: Start by sending compassion to yourself, then gradually extend it to others. Healing often begins with self-compassion.",
                    journal: "Write a letter to yourself with the same kindness you'd show a dear friend going through this pain. What would you want them to know? What comfort would you offer?",
                    affirmation: "I acknowledge my pain without letting it define me. I am resilient and capable of healing. With time and self-care, I will find peace again."
                }
            },
            grateful: {
                keywords: ['grateful', 'thankful', 'blessed', 'appreciative', 'fortunate'],
                responses: {
                    empathy: "Gratitude is such a powerful and healing emotion. It's wonderful that you're able to recognize and appreciate the good in your life, even during challenging times.",
                    mindfulness: "Take a moment to really feel this gratitude in your body. Notice the warmth it creates. Gratitude literally changes our brain chemistry and can improve our overall wellbeing.",
                    journal: "Write about three specific things you're grateful for and why. Try to include one thing about yourself, one about a relationship, and one about an experience you've had.",
                    affirmation: "I am grateful for this moment and the awareness to appreciate it. Gratitude opens my heart to more joy and connection."
                }
            }
        };

        // Global variables
        let currentMood = 5;
        let breathingInterval;
        let breathingCycle = 0;
        let isBreathing = false;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateMoodDisplay(5);
            loadSavedEntries();
        });

        // Mood slider functionality
        document.getElementById('moodSlider').addEventListener('input', function(e) {
            currentMood = parseInt(e.target.value);
            updateMoodDisplay(currentMood);
        });

        function updateMoodDisplay(mood) {
            const data = moodData[mood];
            const emoji = document.getElementById('moodEmoji');
            const text = document.getElementById('moodText');
            const description = document.getElementById('moodDescription');
            
            emoji.textContent = data.emoji;
            text.textContent = data.text;
            description.textContent = data.description;
            
            // Add bounce animation
            emoji.classList.add('bounce');
            setTimeout(() => emoji.classList.remove('bounce'), 400);
            
            // Update slider track color (visual enhancement)
            const slider = document.getElementById('moodSlider');
            const percentage = ((mood - 1) / 9) * 100;
            slider.style.background = `linear-gradient(to right, 
                #ff6b6b 0%, #ff8e53 15%, #ff9f43 30%, 
                #ffd93d 45%, #6bcf7f 60%, #4ecdc4 75%, 
                #45b7d1 90%, #96ceb4 100%)`;
        }

        // Analyze feelings function
        function analyzeFeeling() {
            const feelingsText = document.getElementById('feelingsText').value.trim();
            const mood = parseInt(document.getElementById('moodSlider').value);
            
            if (!feelingsText) {
                alert('Please share what\'s on your mind first. Your thoughts and feelings matter.');
                return;
            }

            const detectedEmotion = detectEmotion(feelingsText, mood);
            displayResponse(detectedEmotion, mood);
        }

        function detectEmotion(text, moodScore) {
            const lowerText = text.toLowerCase();
            
            // Check for specific emotion keywords
            for (const emotion in emotionPatterns) {
                for (const keyword of emotionPatterns[emotion].keywords) {
                    if (lowerText.includes(keyword)) {
                        return emotion;
                    }
                }
            }
            
            // Fallback based on mood score
            if (moodScore <= 3) return 'sad';
            if (moodScore <= 5) return 'confused';
            if (moodScore >= 8) return 'happy';
            return 'grateful'; // Default to neutral-positive
        }

        function displayResponse(emotion, mood) {
            const responses = emotionPatterns[emotion].responses;
            const responseSection = document.getElementById('responseSection');
            const emotionBadge = document.getElementById('emotionBadge');
            const empathyMessage = document.getElementById('empathyMessage');
            const recommendationTitle = document.getElementById('recommendationTitle');
            const recommendationContent = document.getElementById('recommendationContent');
            
            // Show emotion detected
            emotionBadge.textContent = `I sense you might be feeling ${emotion}`;
            
            // Show empathy message
            empathyMessage.textContent = responses.empathy;
            
            // Choose recommendation type based on mood and emotion
            let recommendationType, recommendationText;
            
            if (mood <= 4 || ['anxious', 'sad', 'hurt'].includes(emotion)) {
                recommendationType = '🧘‍♀️ Mindfulness Practice';
                recommendationText = responses.mindfulness;
            } else if (['confused', 'tired'].includes(emotion)) {
                recommendationType = '📝 Journaling Prompt';
                recommendationText = responses.journal;
            } else {
                recommendationType = '💫 Positive Affirmation';
                recommendationText = responses.affirmation;
            }
            
            recommendationTitle.textContent = recommendationType;
            recommendationContent.textContent = recommendationText;
            
            // Show response section with animation
            responseSection.classList.add('show');
            responseSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Save mood entry to localStorage
        function saveMoodEntry() {
            const feelingsText = document.getElementById('feelingsText').value.trim();
            const mood = parseInt(document.getElementById('moodSlider').value);
            
            if (!feelingsText) {
                alert('Please write something about your feelings before saving.');
                return;
            }
            
            const entry = {
                id: Date.now(),
                date: new Date().toLocaleString(),
                mood: mood,
                moodText: moodData[mood].text,
                moodEmoji: moodData[mood].emoji,
                feelings: feelingsText,
                emotion: detectEmotion(feelingsText, mood)
            };
            
            // Get existing entries
            let savedEntries = JSON.parse(localStorage.getItem('serenityAI_entries') || '[]');
            
            // Add new entry to the beginning
            savedEntries.unshift(entry);
            
            // Keep only last 10 entries
            savedEntries = savedEntries.slice(0, 10);
            
            // Save back to localStorage
            localStorage.setItem('serenityAI_entries', JSON.stringify(savedEntries));
            
            // Show success message
            alert('✅ Your mood check-in has been saved! You can view it in your recent entries below.');
            
            // Clear the form
            document.getElementById('feelingsText').value = '';
            document.getElementById('moodSlider').value = 5;
            updateMoodDisplay(5);
            
            // Hide response section
            document.getElementById('responseSection').classList.remove('show');
            
            // Refresh saved entries display
            loadSavedEntries();
        }

        function loadSavedEntries() {
            const savedEntries = JSON.parse(localStorage.getItem('serenityAI_entries') || '[]');
            const entriesSection = document.getElementById('savedEntries');
            const entriesList = document.getElementById('entriesList');
            
            if (savedEntries.length === 0) {
                entriesSection.style.display = 'none';
                return;
            }
            
            entriesSection.style.display = 'block';
            entriesList.innerHTML = '';
            
            savedEntries.forEach(entry => {
                const entryDiv = document.createElement('div');
                entryDiv.className = 'entry-item';
                entryDiv.innerHTML = `
                    <div class="entry-date">${entry.date}</div>
                    <div class="entry-mood">${entry.moodEmoji} ${entry.moodText} (${entry.mood}/10)</div>
                    <div class="entry-text">${entry.feelings}</div>
                `;
                entriesList.appendChild(entryDiv);
            });
        }

        // Breathing exercise functionality
        function openBreathingModal() {
            document.getElementById('breathingModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeBreathingModal() {
            document.getElementById('breathingModal').classList.remove('show');
            document.body.style.overflow = 'auto';
            resetBreathing();
        }

        function startBreathing() {
            if (isBreathing) return;
            
            isBreathing = true;
            breathingCycle = 0;
            
            const startBtn = document.getElementById('startBreathingBtn');
            startBtn.textContent = 'Breathing...';
            startBtn.disabled = true;
            
            runBreathingCycle();
        }

        function runBreathingCycle() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const counter = document.getElementById('breathingCounter');
            
            breathingCycle++;
            
            if (breathingCycle > 6) { // 6 cycles = about 1 minute
                completeBreathing();
                return;
            }
            
            counter.textContent = `Cycle ${breathingCycle} of 6`;
            
            // Inhale phase (4 seconds)
            circle.classList.add('inhale');
            text.textContent = 'Breathe In';
            
            setTimeout(() => {
                // Exhale phase (4 seconds)
                circle.classList.remove('inhale');
                circle.classList.add('exhale');
                text.textContent = 'Breathe Out';
                
                setTimeout(() => {
                    // Reset for next cycle
                    circle.classList.remove('exhale');
                    if (isBreathing) {
                        setTimeout(runBreathingCycle, 500);
                    }
                }, 4000);
            }, 4000);
        }

        function completeBreathing() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const counter = document.getElementById('breathingCounter');
            const startBtn = document.getElementById('startBreathingBtn');
            
            circle.className = 'breathing-circle';
            text.textContent = 'Complete! 🌟';
            counter.textContent = 'Well done! You just gave yourself a minute of peace.';
            
            startBtn.textContent = 'Start Again';
            startBtn.disabled = false;
            isBreathing = false;
            breathingCycle = 0;
        }

        function resetBreathing() {
            if (breathingInterval) {
                clearInterval(breathingInterval);
            }
            
            isBreathing = false;
            breathingCycle = 0;
            
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const counter = document.getElementById('breathingCounter');
            const startBtn = document.getElementById('startBreathingBtn');
            
            circle.className = 'breathing-circle';
            text.textContent = 'Ready?';
            counter.textContent = '';
            startBtn.textContent = 'Start Breathing';
            startBtn.disabled = false;
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('breathingModal');
            if (event.target === modal) {
                closeBreathingModal();
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Enter to analyze (if textarea is focused)
            if (e.key === 'Enter' && e.ctrlKey && document.activeElement.id === 'feelingsText') {
                e.preventDefault();
                analyzeFeeling();
            }
            
            // Escape to close modal
            if (e.key === 'Escape') {
                closeBreathingModal();
            }
        });

        // Auto-resize textarea
        document.getElementById('feelingsText').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // Add some encouraging placeholder text that rotates
        const placeholders = [
            "You can share anything here - your thoughts, feelings, what happened today, or what's weighing on your heart. There's no judgment, just a safe space to express yourself.",
            "What's been on your mind lately? Sometimes writing things down can help us process our feelings...",
            "How has your day been treating you? Feel free to share the highs, lows, or anything in between...",
            "What would you tell a close friend about how you're feeling right now?",
            "Take your time... there's no rush. Your feelings and experiences matter."
        ];

        // Rotate placeholder text every time the page loads
        document.getElementById('feelingsText').placeholder = placeholders[Math.floor(Math.random() * placeholders.length)];
    </script>
</body>
</html>